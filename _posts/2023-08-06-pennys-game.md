---
layout:     post
title:      "ğŸª™ (Lite) ã€Œç¡¬å¸ã€æ¸¸æˆï½œPenney's Game"
subtitle:   "ğŸ‘“ è¿˜æ˜¯è¦å­¦ä¹ ä¸€ä¸ª"
date:       2023-08-06 23:59:00
author:     "Shicong Liu"
header-img: "img/home-dark.jpg"
catalog: true
mathjax: true
comment: true
hide-in-nav: true
tags:
    - å­¦ä¹ 
    - feed
---



ä»Šæ™šçš„å¤§ç–†DJIç¬”è¯•é¢˜å‡ºç°äº†è®¸å¤šæœ‰è¶£é—®é¢˜ï¼ŒåŒ…æ‹¬ä½†ä¸é™äº`3bitæ¯æ¬¡ç¿»è½¬2ä¸ª`ã€‚å…¶ä¸­ä¸€ä¸ªéå¸¸æœ‰è¶£çš„é—®é¢˜æ˜¯ç›®å‰è¾ƒä¸ºå†·é—¨çš„ç»å…¸åšå¼ˆè®ºé—®é¢˜ï¼Œã€Œç¡¬å¸ã€æ¸¸æˆ(Penney's Game)ã€‚é¢˜ç›®æè¿°å¦‚ä¸‹

```
Aã€B ä¸¤äººç©è¿ç»­æŠ›æ·ç¡¬å¸æ¸¸æˆï¼Œä¸¤äººä¾æ¬¡é€‰ä¸åŒçš„æ­£åpatternï¼Œç„¶åå¼€å§‹è¿ç»­æŠ›æ·ç¡¬å¸æ¸¸æˆï¼Œè°é€‰æ‹©çš„patternå…ˆå‡ºç°è°èµ¢ã€‚
1. å‡è®¾é€‰å®špatternçš„é•¿åº¦ä¸º1ï¼Œé‚£ä¹ˆAå’ŒBåªèƒ½åˆ†åˆ«é€‰æ‹©ã€Œæ­£ã€æˆ–ã€Œåã€ï¼ŒäºŒè€…è·èƒœæ¦‚ç‡ç›¸åŒ
2. å‡è®¾é€‰å®špatternçš„é•¿åº¦ä¸º2ï¼Œé‚£ä¹ˆAé€‰ã€Œæ­£æ­£ã€ï¼ŒBé€‰ã€Œæ­£åã€æ—¶ï¼Œè°çš„è·èƒœæ¦‚ç‡å¤§ï¼Ÿè·èƒœæ¦‚ç‡åˆ†åˆ«æ˜¯å¤šå°‘ï¼Ÿ
3. å‡è®¾é€‰å®špatternçš„é•¿åº¦ä¸º3ï¼Œé‚£ä¹ˆAé€‰ã€Œååæ­£ã€ï¼ŒBé€‰ã€Œåæ­£åã€æ—¶ï¼Œè°çš„è·èƒœæ¦‚ç‡å¤§ï¼Ÿè·èƒœæ¦‚ç‡åˆ†åˆ«æ˜¯å¤šå°‘ï¼Ÿ
4. Aå…ˆé€‰ã€Œæ­£æ­£åã€æ—¶ï¼ŒBæ˜¯å¦å¯ä»¥é€šè¿‡é€‰æ‹©patternæœ€å¤§åŒ–è·èƒœæ¦‚ç‡ï¼Ÿæ¦‚ç‡æ˜¯å¤šå°‘ï¼Ÿ
```

ç¡¬å¸æ¸¸æˆæœ€æ—©åœ¨1969å¹´å°±è¢«Walter Penneyæå‡º[^1969]ï¼Œè¯¥æ¸¸æˆè§„å®šäº†æœ€çŸ­patterné•¿åº¦ä¸º$3$ï¼Œè€Œåœ¨æ­¤æ¡ä»¶ä¸‹åå‘ç©å®¶ä¸€å®šèƒ½é€‰æ‹©ä¸€ä¸ªèƒœç‡æ›´é«˜çš„patternã€‚ä»è¯¥é¢˜ç›®çš„è§’åº¦å‡ºå‘ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€ä¸€è§£ç­”å¦‚ä¸‹

## 1. Patterné•¿åº¦ä¸º1

ç¬¬ä¸€æ¬¡ç¡¬å¸æŠ›æ·å°±èƒ½ç¡®å®šèƒœè´Ÿï¼Œå„ä¸º$1/2$

## 2. Patterné•¿åº¦ä¸º2

ä»¥é¢˜ç›®è¦æ±‚ä¸ºä¾‹ï¼Œå½“Aé€‰æ‹©ã€Œæ­£æ­£ã€ï¼ŒBé€‰æ‹©ã€Œæ­£åã€æ—¶ï¼Œç¡¬å¸å¼€å§‹æŠ•æ·ã€‚å½“æŠ•æ·ç»“æœå‡ºç°ã€Œæ­£ã€æ—¶ï¼Œè‹¥ä¸‹æ¬¡çš„æŠ•æ·ç»“æœä¸ºã€Œæ­£ã€åˆ™Aèƒœï¼Œå¦åˆ™Bèƒœï¼Œæ­¤æ—¶æ¦‚ç‡ä»ä¸ºå„è‡ª$1/2$ã€‚

æ­¤å¤–ï¼Œè‹¥Aå’ŒBå„è‡ªä½œå‡ºäº†ä¸åŒçš„é€‰æ‹©ï¼ŒPatterné•¿åº¦ä¸º$2$çš„æ¡ä»¶ä¸‹æˆ‘ä»¬å§‹ç»ˆå¯ä»¥å¾—å‡ºABèƒœç‡ç›¸åŒçš„ç»“è®ºã€‚è¿™ä¹Ÿæ­£æ˜¯è¯¥æ¸¸æˆé‡‡ç”¨$3$ä»¥ä¸Šçš„é•¿åº¦çš„åŸå› ã€‚

## 3. Patterné•¿åº¦ä¸º3

å€¼å¾—ä¸€æçš„æ˜¯ï¼Œç›®å‰å·²ç»æœ‰ç›¸å½“å¤šçš„[åœ¨çº¿demo](https://penneys.github.io/)[^demo]ï¼Œç©å®¶å¯ä»¥è‡ªè¡Œå‚ä¸ä»¿çœŸå¯¹æ¯”ã€‚é’ˆå¯¹é¢˜ç›®ä¸­çš„æƒ…å½¢ï¼Œæœ´ç´ çš„åˆ†ææ–¹æ³•æ˜¯é©¬å°”å¯å¤«é“¾ã€‚æ„é€ å¦‚ä¸‹çŠ¶æ€è½¬ç§»ï¼Œå…¶ä¸­ç”¨`H`ä»£è¡¨æ­£é¢ï¼Œç”¨`T`ä»£è¡¨åé¢

{% if false %}
```mermaid
graph LR
	T-->|1/2| TT
	T-->|1/2| TH
	TT-->|1/2| TT
	TT-->|1/2| A[A wins_]
	TH-->|1/2| B[B wins_]
	TH-->|1/2| H
	H-->|1/2| H
	H-->|1/2| T
```
{% endif %}


<div style="margin: auto; text-align: center">
    <div class="mermaid"> graph LR
	T-->|1/2| TT
	T-->|1/2| TH
	TT-->|1/2| TT
	TT-->|1/2| A[A wins]
	TH-->|1/2| B[B wins]
	TH-->|1/2| H
	H-->|1/2| H
	H-->|1/2| T 
    </div>
</div>
å…¶ä¸­ç¦»å¼€æ¯ä¸ªèŠ‚ç‚¹çš„æ¦‚ç‡å’Œå‡ä¸º$1$ï¼ŒAå’ŒBèƒœåˆ©çš„èŠ‚ç‚¹å‡ä¸ºå¸æ”¶èŠ‚ç‚¹ï¼Œè¿›å…¥åä¸å†å‘ç”ŸçŠ¶æ€è½¬ç§»ã€‚æ ¹æ®ä¸Šè¿°æè¿°å¯ä»¥ç¡®å®šçŠ¶æ€è½¬ç§»çŸ©é˜µåŠå…¶ç¨³æ€ä¸º

<div>
    $$
    {\bf A} = \left[\begin{matrix}
    0 & 0.5 & 0.5 & 0 & 0 & 0\\
    0 & 0.5 & 0 & 0.5 & 0 & 0\\
    0 & 0 & 0 & 0 & 0.5 & 0.5\\
    0 & 0 & 0 & 1 & 0 & 0\\
    0 & 0 & 0 & 0 & 1 & 0\\
    0.5 & 0 & 0 & 0 & 0 & 0.5
    \end{matrix}\right],\quad 
    \lim_{n\rightarrow \infty}{\bf A}^n = \left[\begin{matrix}
    0 & 0 & 0 & 2/3 & 1/3 & 0\\
    0 & 0 & 0 & 1 & 0 & 0\\
    0 & 0 & 0 & 1/3 & 2/3 & 0\\
    0 & 0 & 0 & 1 & 0 & 0\\
    0 & 0 & 0 & 0 & 1 & 0\\
    0 & 0 & 0 & 2/3 & 1/3 & 0
    \end{matrix}\right]
    $$
</div>

æ˜¾ç„¶å½“æˆ‘ä»¬ä»¥åˆå§‹çŠ¶æ€`T`è¿›å…¥æ—¶ï¼ŒAè·èƒœçš„æ¦‚ç‡æ›´é«˜ï¼ˆçº¦ä¸º$2/3$ï¼‰ï¼Œç›¸å…³ç»“æœä¹Ÿå¯ä»¥é€šè¿‡å¹¶ä¸ä¼˜é›…çš„ç¨‹åºéªŒè¯ï¼š

```matlab
clear all
close all
%%
pattern_1 = [0,0,1];
pattern_2 = [0,1,0];
win_1=0;
win_2=0;
length = 100;
implementations = 1000000;
for impl = 1:implementations
    seq = randi(2,[1,length])-1;
    for i = 1:length-2
        if seq(i) == pattern_1(1) && seq(i+1) == pattern_1(2) && seq(i+2) == pattern_1(3)
            win_1 = win_1+1;
            break
        end
        if seq(i) == pattern_2(1) && seq(i+1) == pattern_2(2) && seq(i+2) == pattern_2(3)
            win_2 = win_2+1;
            break
        end
    end
end
```

ä½†æ˜¯ä¸Šè¿°åˆ†ææ–¹æ³•å¹¶ä¸èƒ½æŒ‡å¯¼Bçš„æ–¹æ¡ˆé€‰æ‹©ã€‚å°½ç®¡æˆ‘ä»¬èƒ½å¤Ÿåœ¨å¯¹æ‰‹é€‰å®špatternååˆ†åˆ«è®¡ç®—æ¯ä¸€ä¸ªpatternçš„ç¨³æ€æ¦‚ç‡ï¼Œä½†è¿™æ ·çš„æ•ˆç‡å¹¶ä¸é«˜ã€‚ç”±äºæ€»å…±åªæœ‰$2^3 = 8$ç§æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥æ¯”è¾ƒæ–¹ä¾¿åœ°æå‰è®¡ç®—èƒœç‡ã€‚ä»¥ä¸‹æ˜¯$3$bitæ¡ä»¶çš„åæ‰‹æœ€ä½³èƒœç‡è¡¨æ ¼[^wiki]

| Player A | Player B | B:A Ratio |
| -------- | -------- | --------- |
| H**H**H  | **T**HH  | 7ï¼š1      |
| H**H**T  | **T**HH  | 3ï¼š1      |
| H**T**H  | **H**HT  | 2ï¼š1      |
| H**T**T  | **H**HT  | 2ï¼š1      |
| T**H**H  | **T**TH  | 2ï¼š1      |
| T**H**T  | **T**TH  | 2ï¼š1      |
| T**T**H  | **H**TT  | 3ï¼š1      |
| T**T**T  | **H**TT  | 7ï¼š1      |

è¯¥ç»“è®ºæ¥è‡ªäº1981å¹´çš„ä¸€ç¯‡è®ºæ–‡[^paper]ï¼Œç›®å‰å¤„äºOpen Accessçš„çŠ¶æ€ã€‚ä»”ç»†è§‚å¯Ÿå®¹æ˜“å‘ç°ï¼Œåæ‰‹çš„é€‰å–å‡å°†å…ˆæ‰‹patternçš„å‰ä¸¤ä½ç½®äºæœ«å°¾ã€‚æˆ‘ä»¬å¯ä»¥ä»çŠ¶æ€æœºçš„è§’åº¦å»ç†è§£è¿™ä¸ªé—®é¢˜ï¼Œå½“å¼€å§‹æŠ›ç¡¬å¸çš„æ—¶å€™ï¼Œæ¨¡å¼åŒ¹é…é—®é¢˜å°±è¿›å…¥äº†æœ‰é™çŠ¶æ€æœºè¿­ä»£ã€‚





# æ‰©å±•é˜…è¯»

[^1969]: Walter Penney, Problem 95. Penney-Ante, *J. Recreat. Math.*, **2** (1969), 241.
[^demo]: [Penney's Game Online](https://penneys.github.io/)
[^wiki]:[Penney's game Wikipedia](https://en.wikipedia.org/wiki/Penney%27s_game)
[^paper]:[L.J Guibas, A.M Odlyzko, String overlaps, pattern matching, and nontransitive games, *Journal of Combinatorial Theory, Series A*, vol. 30, no. 2, pp. 183-208, 1981.](https://www.sciencedirect.com/science/article/pii/0097316581900054)
